---
title: "Homework2"
author: "Isabel Nelson"
date: "9/24/2020"
output: github_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(readxl)
```

### Problem 1: Mr. Trashwheel

Read in Mr. Trashwheel dataset:   
```{r import_trash}
trashwheel_df <- read_xlsx(
  "./Data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
  sheet = "Mr. Trash Wheel",
  range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% #this only gets rid of NA values in the dumpster col
  mutate(
    sports_balls = round(sports_balls), 
    sports_balls = as.integer(sports_balls) #can modify the previous variable we just mutated
  )
```

Read in precipitation data for 2017 and 2018:   
```{r import_prec}
precip2018_df <- read_xlsx(
  "./Data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
  sheet = "2018 Precipitation",
  skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip2017_df <- read_xlsx(
  "./Data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
  sheet = "2017 Precipitation",
  skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Combine two precipitation datasets: 
```{r combine}
month_df <-
  tibble(
    month = 1:12, 
    month_name = month.name
  )

precip_df <-
  bind_rows(precip2017_df, precip2018_df)

left_join(precip_df, month_df, by = "month")
```

Extract out variables to use for the paragraph below - total precipitation and median sports balls in 2017.

```{r key_data}
# Total precipitation
precip_2017 <- sum(pull(filter(precip_df, year == 2017), total))

precip_2018 <- sum(pull(filter(precip_df, year == 2018), total))
  
# Median number of sports balls in a dumpster in 2017
med_balls <- median(pull(filter(trashwheel_df, year == 2017), sports_balls))

```

This dataset has information from the Mr. Trashwheel trash collector in Baltimore, Maryland. When trash enters the harbor, the trashwheel collects it and puts it into a dumpster. The dataset has information on year, month, and trash collected, including some specific types of trash. There are a total of `r nrow(trashwheel_df)` rows in the final Mr. Trashwheel dataset. It includes variables: `r colnames(trashwheel_df)` and has data from `r min(pull(trashwheel_df, year))` to `r max(pull(trashwheel_df, year))`. The median number of sports balls in a dumpster in 2017 was `r med_balls`. Additional data sheets include month precipitation data. The total precipitation in 2017 was `r precip_2017` inches. The total precipitation in 2018 was `r precip_2018` inches. 

### Problem 2: NYC transit
Read in dataset and perform data cleaning steps: clean up names, remove unneeded columns, change type of entry variable. 
```{r read, message = FALSE}
subway_df <- read_csv("./Data/NYC_Transit_Subway.csv") %>% 
  janitor::clean_names() %>% 
  select(line, station_name, station_latitude, station_longitude,     route1:route11, entry, entrance_type, vending, ada) %>% 
  {mutate(., entry = (ifelse((pull(., entry) == "YES"), TRUE, FALSE)))}
```
The NYC transit dataset contains information about subway stations in NYC. Initially the dataset contained variables detailing each entrance and exit location at every station, along with additional details about which subway lines serve the station. After cleaning the names and removing some of the variables, the final dataset contains variables `r colnames(subway_df)`. As part of the data cleaning I changed the entry variable from character to logical, using mutate and ifelse. After these cleaning steps there are `r nrow(subway_df)` rows representing exits/entrances, and `r ncol(subway_df)` columns. These data are not tidy because the way route is communicated is combining route number and name. 

Answering questions about the dataset: finding distinct stations by line and station name, ada complient stations, and proportion of entrances/exit without vending that allow entry. 
```{r questions}
distinct_stations <- distinct(subway_df, line, station_name, .keep_all = TRUE)
ada_compliant <- nrow(filter(distinct_stations, ada == TRUE))
vending_df <- subway_df %>% 
  filter(vending == "NO") 
prop_entrance = nrow(filter(vending_df, entry == TRUE)) / nrow(vending_df)
```

1. There are `r nrow(distinct_stations)` distinct stations.  
2. `r ada_compliant` stations are ADA compliant. 
3. `r prop_entrance` stations without vending allow entrance.



### Problem 3: FiveThirtyEight
